---
title: "Sample Nginx With Self Signed Https Protocol"
date: 2023-08-14T00:03:12+02:00
Description: ""
Tags: []
Categories: []
DisableComments: false
---

## Sample nginx with a self-signed certificate

Steps on how to generate a self-signed SSL certificate using OpenSSL, install it in a Docker container, and access it using HTTPS protocol and port 5001 in your Windows machine:

1. Generate the server private key:

```ssh
openssl genrsa -out server.key 2048
```

2. Create a certificate signing request (CSR):

```ssh
openssl req -new -key server.key -out server.csr \
  -subj "/CN=localhost"
```

3. Sign the CSR with the server private key:

```ssh
openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt
```

4. Create a Dockerfile that will install the SSL certificate in the container:

```ssh
FROM nginx
RUN apt-get update && apt-get install -y openssl
COPY server.key server.crt /etc/ssl/private/
```

5. Build the Docker image:

```ssh
docker build -t my-ssl-server .
```

6. Run the Docker container:

```ssh
docker run -it -p 5001:80 my-ssl-server
```

7. In your Windows machine, open a web browser and navigate to https://localhost:5001. You should see the following message:
This is a self-signed certificate.

This means that the certificate was generated by you and is not trusted by any certificate authorities. However, you can still access the website using HTTPS because the browser will still encrypt the traffic between your computer and the server.

## Configure windows to trust the self-signed certificate

To add the certificate to your browser's trusted certificate store, follow these steps:

1. In your web browser, open the Settings menu.
2. Click on Security and Privacy.
3. Click on Advanced.
4. Under HTTPS/SSL, click on Manage certificates.
5. Click on the Trusted Root Certification Authorities tab.
6. Click on the Import button.
7. Browse to the location of the server.crt file and click on Open.
8. Click on the Yes button to confirm the import.

Now, when you navigate to https://localhost:5001 in your browser, you should not see the error message.

Here are some additional things you can try if you are getting the error that says "This site canâ€™t provide a secure connectionlocalhost sent an invalid response. ERR_SSL_PROTOCOL_ERROR":

* Make sure that your system time and date are correct.
* Try clearing your browser's cache and cookies.
* Try disabling any browser extensions that you are not using.
* Try updating your browser to the latest version.
* Try restarting your computer.